pipeline {
   agent { label 'java-docker-slave'}

   stages {
      stage('Hello') {
         steps {
            echo 'Hello World'
         }
      }

     stage('pwd') {
         steps {
             sh 'pwd'
          }
      }


      stage('mvn test') {
         steps {
            sh 'CRUMB=$(curl -s 'http://easternbay:11d0b40928a68f0e2963eab314ac1ad0b8@3.112.6.241:80/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,":",//crumb)')
  '
            sh 'curl -X POST -H "$CRUMB" http://easternbay:11d0b40928a68f0e2963eab314ac1ad0b8@3.112.6.241:80/job/docker-slave-pipeline-test/lastBuild/consoleText'
                      }
      }


   }
}
